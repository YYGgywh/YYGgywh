import random
import sys
import os

# 添加backend/src目录到Python路径，以便导入calendar_calculator
sys.path.append(os.path.join(os.path.dirname(__file__), '..', 'src'))

SIXTY_FOUR_GUA = {
    # 乾宫八卦（完整）
    "111111": {"卦宫": "乾", "宫属": "本宫", "卦名": "乾为天",
               "纳干": ["甲", "甲", "甲", "壬", "壬", "壬"],
               "纳支": ["子", "寅", "辰", "午", "申", "戌"],
               "世应": ["", "", "应", "", "", "世"],               
               "伏干": ["", "甲", "", "", "", ""],
               "伏支": ["", "寅", "", "", "", ""],
               "伏亲": ["", "妻财", "", "", "", ""],
               "世身":"五爻", "月身":"巳", "冲合":"六冲",
               "上卦": "乾", "下卦": "乾", "易序": 1, "宫序": 1},
    "011111": {"卦宫": "乾", "宫属": "一世", "卦名": "天风姤",
              "纳干": ["辛", "辛", "辛", "壬", "壬", "壬"],
               "纳支": ["丑", "亥", "酉", "午", "申", "戌"],
               "六亲": ["父母", "子孙", "兄弟", "官鬼", "兄弟", "父母"],
               "世应": ["世", "", "", "应", "", ""],
               "伏干": ["", "甲", "", "", "", ""],
               "伏支": ["", "寅", "", "", "", ""],
               "伏亲": ["", "妻财", "", "", "", ""],
               "世身":"二爻", "月身":"午", "冲合":"",
               "上卦": "乾", "下卦": "巽", "易序": 44, "宫序": 2},
    "001111": {"卦宫": "乾", "宫属": "二世", "卦名": "天山遁",               
               "纳干": ["丙", "丙", "丙", "壬", "壬", "壬"],
               "纳支": ["辰", "午", "申", "午", "申", "戌"],
               "六亲": ["父母", "官鬼", "兄弟", "官鬼", "兄弟", "父母"],
               "世应": ["", "世", "", "", "应", ""],
               "伏干": ["甲", "甲", "", "", "", ""],
               "伏支": ["子", "寅", "", "", "", ""],
               "伏亲": ["子孙", "妻财", "", "", "", ""],
               "世身":"初爻", "月身":"未", "冲合":"",
               "上卦": "乾", "下卦": "艮", "易序": 33},
    "000111": {"卦宫": "乾", "宫属": "三世", "卦名": "天地否",
               "纳干": ["乙", "乙", "乙", "壬", "壬", "壬"],
               "纳支": ["未", "巳", "卯", "午", "申", "戌"],
               "六亲": ["父母", "官鬼", "妻财", "官鬼", "兄弟", "父母"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["甲", "", "", "", "", ""],
               "伏支": ["子", "", "", "", "", ""],
               "伏亲": ["子孙", "", "", "", "", ""],
               "世身":"四爻", "月身":"申", "冲合":"六合",
               "上卦": "乾", "下卦": "坤", "易序": 12},
    "000011": {"卦宫": "乾", "宫属": "四世", "卦名": "风地观",
               "纳干": ["乙", "乙", "乙", "辛", "辛", "辛"],
               "纳支": ["未", "巳", "卯", "未", "巳", "卯"],
               "六亲": ["父母", "官鬼", "妻财", "父母", "官鬼", "妻财"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["甲", "", "", "", "壬", ""],
               "伏支": ["子", "", "", "", "申", ""],
               "伏亲": ["子孙", "", "", "", "兄弟", ""],
               "世身":"二爻", "月身":"酉", "冲合":"",
               "上卦": "巽", "下卦": "坤", "易序": 20},
    "000001": {"卦宫": "乾", "宫属": "五世", "卦名": "山地剥",
               "纳干": ["乙", "乙", "乙", "丙", "丙", "丙"],
               "纳支": ["未", "巳", "卯", "戌", "子", "寅"],
               "六亲": ["父母", "官鬼", "妻财", "父母", "子孙", "妻财"],
               "世应": ["", "应", "", "", "世", ""],
               "伏干": ["", "", "", "", "壬", ""],
               "伏支": ["", "", "", "", "申", ""],
               "伏亲": ["", "", "", "", "兄弟", ""],
               "伏亲": ["子孙", "", "", "", "兄弟", ""],
               "世身":"初爻", "月身":"戌", "冲合":"",
               "上卦": "艮", "下卦": "坤", "易序": 23},
    "000101": {"卦宫": "乾", "宫属": "游魂", "卦名": "火地晋",
               "纳干": ["乙", "乙", "乙", "己", "己", "己"],
               "纳支": ["未", "巳", "卯", "酉", "未", "巳"],
               "六亲": ["父母", "官鬼", "妻财", "兄弟", "父母", "官鬼"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["甲", "", "", "", "", ""],
               "伏支": ["子", "", "", "", "", ""],
               "伏亲": ["子孙", "", "", "", "", ""],
               "世身":"四爻", "月身":"卯", "冲合":"",
               "上卦": "离", "下卦": "坤", "易序": 35},
    "111101": {"卦宫": "乾", "宫属": "归魂", "卦名": "火天大有",
               "纳干": ["甲", "甲", "甲", "己", "己", "己"],
               "纳支": ["子", "寅", "辰", "酉", "未", "巳"],
               "六亲": ["子孙", "妻财", "父母", "兄弟", "父母", "官鬼"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"五爻", "月身":"寅", "冲合":"",
               "上卦": "离", "下卦": "乾", "易序": 14},

    # 兑宫八卦（完整）
    "110110": {"卦宫": "兑", "宫属": "本宫", "卦名": "兑为泽",
               "纳干": ["丁", "丁", "丁", "丁", "丁", "丁"],
               "纳支": ["巳", "卯", "丑", "亥", "酉", "未"],
               "六亲": ["官鬼", "妻财", "父母", "子孙", "兄弟", "父母"],
               "世应": ["", "", "应", "", "", "世"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"二爻", "月身":"亥", "冲合":"六冲",
               "上卦": "兑", "下卦": "兑", "易序": 58},
    "010110": {"卦宫": "兑", "宫属": "一世", "卦名": "泽水困",
               "纳干": ["戊", "戊", "戊", "丁", "丁", "丁"],
               "纳支": ["寅", "辰", "午", "亥", "酉", "未"],
               "六亲": ["妻财", "父母", "官鬼", "子孙", "兄弟", "父母"],
               "世应": ["世", "", "", "应", "", ""],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"三爻", "月身":"午", "冲合":"六合",
               "上卦": "兑", "下卦": "坎", "易序": 47,},
    "000110": {"卦宫": "兑", "宫属": "二世", "卦名": "泽地萃",
               "纳干": ["乙", "乙", "乙", "丁", "丁", "丁"],
               "纳支": ["未", "巳", "卯", "亥", "酉", "未"],
               "六亲": ["父母", "官鬼", "妻财", "子孙", "兄弟", "父母"],
               "世应": ["", "世", "", "", "应", ""],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"上爻", "月身":"未", "冲合":"",
               "上卦": "兑", "下卦": "坤", "易序": 45,},
    "001110": {"卦宫": "兑", "宫属": "三世", "卦名": "泽山咸",
               "纳干": ["丙", "丙", "丙", "丁", "丁", "丁"],
               "纳支": ["辰", "午", "申", "亥", "酉", "未"],
               "六亲": ["父母", "官鬼", "兄弟", "子孙", "兄弟", "父母"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "丁", "", "", "", ""],
               "伏支": ["", "卯", "", "", "", ""],
               "伏亲": ["", "妻财", "", "", "", ""],
               "世身":"三爻", "月身":"寅", "冲合":"",
               "上卦": "兑", "下卦": "艮", "易序": 31,},
    "001010": {"卦宫": "兑", "宫属": "四世", "卦名": "水山蹇",
               "纳干": ["丙", "丙", "丙", "戊", "戊", "戊"],
               "纳支": ["辰", "午", "申", "申", "戌", "子"],
               "六亲": ["父母", "官鬼", "兄弟", "兄弟", "父母", "子孙"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "丁", "", "", "", ""],
               "伏支": ["", "卯", "", "", "", ""],
               "伏亲": ["", "妻财", "", "", "", ""],
               "世身":"三爻", "月身":"酉", "冲合":"",
               "上卦": "坎", "下卦": "艮", "易序": 39,},
    "001000": {"卦宫": "兑", "宫属": "五世", "卦名": "地山谦",
               "纳干": ["丙", "丙", "丙", "癸", "癸", "癸"],
               "纳支": ["辰", "午", "申", "丑", "亥", "酉"],
               "六亲": ["父母", "官鬼", "兄弟", "父母", "子孙", "兄弟"],
               "世应": ["", "应", "", "", "世", ""],
               "伏干": ["", "丁", "", "", "", ""],
               "伏支": ["", "卯", "", "", "", ""],
               "伏亲": ["", "妻财", "", "", "", ""],
               "世身":"上爻", "月身":"戌", "冲合":"",
               "上卦": "坤", "下卦": "艮", "易序": 15,},
    "001100": {"卦宫": "兑", "宫属": "游魂", "卦名": "雷山小过",
               "纳干": ["丙", "丙", "丙", "庚", "庚", "庚"],
               "纳支": ["辰", "午", "申", "午", "申", "戌"],
               "六亲": ["父母", "官鬼", "兄弟", "官鬼", "兄弟", "父母"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "丁", "", "丁", "", ""],
               "伏支": ["", "卯", "", "亥", "", ""],
               "伏亲": ["", "妻财", "", "子孙", "", ""],
               "世身":"初爻", "月身":"卯", "冲合":"",
               "上卦": "震", "下卦": "艮", "易序": 62,},
    "110100": {"卦宫": "兑", "宫属": "归魂", "卦名": "雷泽归妹", 
               "纳干": ["丁", "丁", "丁", "庚", "庚", "庚"],
               "纳支": ["巳", "卯", "丑", "午", "申", "戌"],
               "六亲": ["官鬼", "妻财", "父母", "官鬼", "兄弟", "父母"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "", "丁", "", ""],
               "伏支": ["", "", "", "亥", "", ""],
               "伏亲": ["", "", "", "子孙", "", ""],
               "世身":"二爻", "月身":"申", "冲合":"",
               "上卦": "震", "下卦": "兑", "易序": 54,},

    # 离宫八卦（完整）
    "101101": {"卦宫": "离", "宫属": "本宫", "卦名": "离为火",
               "纳干": ["己", "己", "己", "己", "己", "己"],
               "纳支": ["卯", "丑", "亥", "酉", "未", "巳"],
               "六亲": ["父母", "妻财", "官鬼", "妻财", "子孙", "兄弟"],
               "世应": ["", "", "应", "", "", "世"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"上爻", "月身":"巳", "冲合":"六冲",
               "上卦": "离", "下卦": "离", "易序": 30,},
    "001101": {"卦宫": "离", "宫属": "一世", "卦名": "火山旅",
               "纳干": ["丙", "丙", "丙", "己", "己", "己"],
               "纳支": ["辰", "午", "申", "酉", "未", "巳"],
               "六亲": ["子孙", "兄弟", "妻财", "妻财", "子孙", "兄弟"],
               "世应": ["世", "", "", "应", "", ""],
               "伏干": ["己", "", "己", "", "", ""],
               "伏支": ["卯", "", "亥", "", "", ""],
               "伏亲": ["父母", "", "", "官鬼", "", ""],
               "世身":"五爻", "月身":"午", "冲合":"六合",
               "上卦": "离", "下卦": "艮", "易序": 56,},
    "011101": {"卦宫": "离", "宫属": "二世", "卦名": "火风鼎",
               "纳干": ["辛", "辛", "辛", "己", "己", "己"],
               "纳支": ["丑", "亥", "酉", "酉", "未", "巳"],
               "六亲": ["子水", "官鬼", "妻财", "妻财", "子孙", "兄弟"],
               "世应": ["", "世", "", "", "应", ""],
               "伏干": ["己", "", "", "", "", ""],
               "伏支": ["卯", "", "", "", "", ""],
               "伏亲": ["父母", "", "", "", "", ""],
               "世身":"上爻", "月身":"丑", "冲合":"",
               "上卦": "离", "下卦": "巽", "易序": 50,},
    "010101": {"卦宫": "离", "宫属": "三世", "卦名": "火水未济",
               "纳干": ["戊", "戊", "戊", "己", "己", "己"],
               "纳支": ["寅", "辰", "午", "酉", "未", "巳"],
               "六亲": ["父母", "子孙", "兄弟", "妻财", "子孙", "兄弟"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "己", "", "", ""],
               "伏支": ["", "", "亥", "", "", ""],
               "伏亲": ["", "", "官鬼", "", "", ""],
               "世身":"初爻", "月身":"申", "冲合":"",
               "上卦": "离", "下卦": "坎", "易序": 64,},
    "010001": {"卦宫": "离", "宫属": "四世", "卦名": "山水蒙",
               "纳干": ["戊", "戊", "戊", "丙", "丙", "丙"],
               "纳支": ["寅", "辰", "午", "戌", "子", "寅"],
               "六亲": ["父母", "子孙", "兄弟", "子孙", "官鬼", "父母"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "", "", "己", "", ""],
               "伏支": ["", "", "", "酉", "", ""],
               "伏亲": ["", "", "", "妻财", "", ""],
               "世身":"五爻", "月身":"酉", "冲合":"",
               "上卦": "艮", "下卦": "坎", "易序": 4,},
    "010011": {"卦宫": "离", "宫属": "五世", "卦名": "风水涣",
               "纳干": ["戊", "戊", "戊", "辛", "辛", "辛"],
               "纳支": ["寅", "辰", "午", "未", "巳", "卯"],
               "六亲": ["父母", "子孙", "兄弟", "子孙", "兄弟", "父母"],
               "世应": ["", "应", "", "", "世", ""],
               "伏干": ["", "", "己", "己", "", ""],
               "伏支": ["", "", "亥", "酉", "", ""],
               "伏亲": ["", "", "官鬼", "妻财", "", ""],
               "世身":"上爻", "月身":"辰", "冲合":"",
               "上卦": "巽", "下卦": "坎", "易序": 59,},
    "010111": {"卦宫": "离", "宫属": "游魂", "卦名": "天水讼",
               "纳干": ["戊", "戊", "戊", "壬", "壬", "壬"],
               "纳支": ["寅", "辰", "午", "午", "申", "戌"],
               "六亲": ["父母", "子孙", "兄弟", "兄弟", "妻财", "子孙"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "", "己", "", "", ""],
               "伏支": ["", "", "亥", "", "", ""],
               "伏亲": ["", "", "官鬼", "", "", ""],
               "世身":"初爻", "月身":"卯", "冲合":"",
               "上卦": "乾", "下卦": "坎", "易序": 6,},
    "101111": {"卦宫": "离", "宫属": "归魂", "卦名": "天火同人",
               "纳干": ["己", "己", "己", "壬", "壬", "壬"],
               "纳支": ["卯", "丑", "亥", "午", "申", "戌"],
               "六亲": ["父母", "子孙", "官鬼", "兄弟", "妻财", "子孙"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"上爻", "月身":"寅", "冲合":"",
               "上卦": "乾", "下卦": "离", "易序": 13,},

    # 震宫八卦（完整）
    "100100": {"卦宫": "震", "宫属": "本宫", "卦名": "震为雷",
               "纳干": ["庚", "庚", "庚", "庚", "庚", "庚"],
               "纳支": ["子", "寅", "辰", "午", "申", "戌"],
               "六亲": ["父母", "兄弟", "妻财", "子孙", "官鬼", "妻财"],
               "世应": ["", "", "应", "", "", "世"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"五爻", "月身":"亥", "冲合":"六冲",
               "上卦": "震", "下卦": "震", "易序": 51,},
    "000100": {"卦宫": "震", "宫属": "一世", "卦名": "雷地豫",
               "纳干": ["乙", "乙", "乙", "庚", "庚", "庚"],
               "纳支": ["未", "巳", "卯", "午", "申", "戌"],
               "六亲": ["妻财", "子孙", "兄弟", "子孙", "官鬼", "妻财"], 
               "世应": ["世", "", "", "应", "", ""],               
               "伏干": ["庚", "", "", "", "", ""],
               "伏支": ["子", "", "", "", "", ""],
               "伏亲": ["父母", "", "", "", "", ""],
               "世身":"二爻", "月身":"午", "冲合":"六合",
               "上卦": "震", "下卦": "坤", "易序": 16,},
    "010100": {"卦宫": "震", "宫属": "二世", "卦名": "雷水解",
               "纳干": ["戊", "戊", "戊", "庚", "庚", "庚"],
               "纳支": ["寅", "辰", "午", "午", "申", "戌"],
               "六亲": ["兄弟", "妻财", "子孙", "子孙", "官鬼", "妻财"],
               "世应": ["", "世", "", "", "应", ""],       
               "伏干": ["庚", "", "", "", "", ""],
               "伏支": ["子", "", "", "", "", ""],
               "伏亲": ["父母", "", "", "", "", ""],
               "世身":"五爻", "月身":"丑", "冲合":"",
               "上卦": "震", "下卦": "坎", "易序": 40,},
    "011100": {"卦宫": "震", "宫属": "三世", "卦名": "雷风恒",
               "纳干": ["辛", "辛", "辛", "庚", "庚", "庚"],
               "纳支": ["丑", "亥", "酉", "午", "申", "戌"],
               "六亲": ["妻财", "父母", "官鬼", "子孙", "官鬼", "妻财"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "庚", "", "", "", ""],
               "伏支": ["", "寅", "", "", "", ""],
               "伏亲": ["", "兄弟", "", "", "", ""],
               "世身":"四爻", "月身":"寅", "冲合":"",
               "上卦": "震", "下卦": "巽", "易序": 32,},
    "011000": {"卦宫": "震", "宫属": "四世", "卦名": "地风升",
               "纳干": ["辛", "辛", "辛", "癸", "癸", "癸"],
               "纳支": ["丑", "亥", "酉", "丑", "亥", "酉"],
               "六亲": ["妻财", "父母", "官鬼", "妻财", "父母", "官鬼"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "庚", "", "庚", "", ""],
               "伏支": ["", "寅", "", "午", "", ""],
               "伏亲": ["", "兄弟", "", "子孙", "", ""],
               "世身":"二爻", "月身":"酉", "冲合":"",
               "上卦": "坤", "下卦": "巽", "易序": 46,},
    "011010": {"卦宫": "震", "宫属": "五世", "卦名": "水风井",
               "纳干": ["辛", "辛", "辛", "戊", "戊", "戊"],
               "纳支": ["丑", "亥", "酉", "申", "戌", "子"],
               "六亲": ["妻财", "父母", "官鬼", "官鬼", "妻财", "父母"],
               "世应": ["", "应", "", "", "世", ""],
               "伏干": ["", "庚", "", "庚", "", ""],
               "伏支": ["", "寅", "", "午", "", ""],
               "伏亲": ["", "兄弟", "", "子孙", "", ""],
               "世身":"五爻", "月身":"辰", "冲合":"",
               "上卦": "坎", "下卦": "巽", "易序": 48,},
    "011110": {"卦宫": "震", "宫属": "游魂", "卦名": "泽风大过",
               "纳干": ["辛", "辛", "辛", "丁", "丁", "丁"],
               "纳支": ["丑", "亥", "酉", "亥", "酉", "未"],
               "六亲": ["妻财", "父母", "官鬼", "父母", "官鬼", "妻财"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "庚", "", "庚", "", ""],
               "伏支": ["", "寅", "", "午", "", ""],
               "伏亲": ["", "兄弟", "", "子孙", "", ""],
               "世身":"上爻", "月身":"卯", "冲合":"",
               "上卦": "兑", "下卦": "巽", "易序": 28,},
    "100110": {"卦宫": "震", "宫属": "归魂", "卦名": "泽雷随",
               "纳干": ["庚", "庚", "庚", "丁", "丁", "丁"],
               "纳支": ["子", "寅", "辰", "亥", "酉", "未"],
               "六亲": ["父母", "兄弟", "妻财", "父母", "官鬼", "妻财"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "", "庚", "", ""],
               "伏支": ["", "", "", "午", "", ""],
               "伏亲": ["", "", "", "子孙", "", ""],
               "世身":"五爻", "月身":"申", "冲合":"",
               "上卦": "兑", "下卦": "震", "易序": 17,},

    # 巽宫八卦（完整）
    "011011": {"卦宫": "巽", "宫属": "本宫", "卦名": "巽为风",
               "纳干": ["辛", "辛", "辛", "辛", "辛", "辛"],
               "纳支": ["丑", "亥", "酉", "未", "巳", "卯"],
               "六亲": ["妻财", "父母", "官鬼", "妻财", "子孙", "兄弟"],
               "世应": ["", "", "应", "", "", "世"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"四爻", "月身":"巳", "冲合":"六冲",
               "上卦": "巽", "下卦": "巽", "易序": 57,},
    "111011": {"卦宫": "巽", "宫属": "一世", "卦名": "风天小畜",
               "纳干": ["甲", "甲", "甲", "辛", "辛", "辛"],
               "纳支": ["子", "寅", "辰", "未", "巳", "卯"],
               "六亲": ["父母", "兄弟", "妻财", "妻财", "子孙", "兄弟"],
               "世应": ["世", "", "", "应", "", ""],
               "伏干": ["", "", "辛", "", "", ""],
               "伏支": ["", "", "酉", "", "", ""],
               "伏亲": ["", "", "官鬼", "", "", ""],
               "世身":"初爻", "月身":"子", "冲合":"",
               "上卦": "巽", "下卦": "乾", "易序": 9,},
    "101011": {"卦宫": "巽", "宫属": "二世", "卦名": "风火家人",
               "纳干": ["己", "己", "己", "辛", "辛", "辛"],
               "纳支": ["卯", "丑", "亥", "未", "巳", "卯"],
               "六亲": ["兄弟", "妻财", "父母", "妻财", "子孙", "兄弟"],
               "世应": ["", "世", "", "", "应", ""],
               "伏干": ["", "", "辛", "", "", ""],
               "伏支": ["", "", "酉", "", "", ""],
               "伏亲": ["", "", "官鬼", "", "", ""],
               "世身":"二爻", "月身":"未", "冲合":"",
               "上卦": "巽", "下卦": "离", "易序": 37,},
    "100011": {"卦宫": "巽", "宫属": "三世", "卦名": "风雷益",  
               "纳干": ["庚", "庚", "庚", "辛", "辛", "辛"],
               "纳支": ["子", "寅", "辰", "未", "巳", "卯"],
               "六亲": ["父母", "兄弟", "妻财", "妻财", "子孙", "兄弟"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "辛", "", "", ""],
               "伏支": ["", "", "酉", "", "", ""],
               "伏亲": ["", "", "官鬼", "", "", ""],
               "世身":"五爻", "月身":"申", "冲合":"",
               "上卦": "巽", "下卦": "震", "易序": 42,},
    "100111": {"卦宫": "巽", "宫属": "四世", "卦名": "天雷无妄",
               "纳干": ["庚", "庚", "庚", "壬", "壬", "壬"],
               "纳支": ["子", "寅", "辰", "午", "申", "戌"],
               "六亲": ["父母", "兄弟", "妻财", "子孙", "官鬼", "妻财"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"初爻", "月身":"卯", "冲合":"六冲",
               "上卦": "乾", "下卦": "震", "易序": 25,},
    "100101": {"卦宫": "巽", "宫属": "五世", "卦名": "火雷噬嗑",
               "纳干": ["庚", "庚", "庚", "己", "己", "己"],
               "纳支": ["子", "寅", "辰", "酉", "未", "巳"],
               "六亲": ["父母", "兄弟", "妻财", "官鬼", "妻财", "子孙"],
               "世应": ["", "应", "", "", "世", ""],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"二爻", "月身":"戌", "冲合":"",
               "上卦": "离", "下卦": "震", "易序": 21,},
    "100001": {"卦宫": "巽", "宫属": "游魂", "卦名": "山雷颐",
               "纳干": ["庚", "庚", "庚", "丙", "丙", "丙"],
               "纳支": ["子", "寅", "辰", "戌", "子", "寅"],
               "六亲": ["父母", "兄弟", "妻财", "妻财", "父母", "兄弟"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "", "辛", "", "辛", ""],
               "伏支": ["", "", "酉", "", "巳", ""],
               "伏亲": ["", "", "官鬼", "", "子孙", ""],
               "世身":"五爻", "月身":"酉", "冲合":"",
               "上卦": "艮", "下卦": "震", "易序": 27,},
    "011001": {"卦宫": "巽", "宫属": "归魂", "卦名": "山风蛊",
               "纳干": ["辛", "辛", "辛", "丙", "丙", "丙"],
               "纳支": ["丑", "亥", "酉", "戌", "子", "寅"],
               "六亲": ["妻财", "父母", "官鬼", "妻财", "父母", "兄弟"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "", "", "辛", ""],
               "伏支": ["", "", "", "", "巳", ""],
               "伏亲": ["", "", "", "", "子孙", ""],
               "世身":"四爻", "月身":"寅", "冲合":"",
               "上卦": "艮", "下卦": "巽", "易序": 18,},

    # 坎宫八卦（完整）
    "010010": {"卦宫": "坎", "宫属": "本宫", "卦名": "坎为水",
               "纳干": ["戊", "戊", "戊", "戊", "戊", "戊"],
               "纳支": ["寅", "辰", "午", "申", "戌", "子"],
               "六亲": ["子孙", "官鬼", "妻财", "父母", "官鬼", "兄弟"],
               "世应": ["", "", "应", "", "", "世"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"初爻", "月身":"亥", "冲合":"六冲",
               "上卦": "坎", "下卦": "坎", "易序": 29,},
    "110010": {"卦宫": "坎", "宫属": "一世", "卦名": "水泽节",
               "纳干": ["丁", "丁", "丁", "戊", "戊", "戊"],
               "纳支": ["巳", "卯", "丑", "申", "戌", "子"],
               "六亲": ["妻财", "子孙", "官鬼", "父母", "官鬼", "兄弟"],
               "世应": ["世", "", "", "应", "", ""],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"上爻", "月身":"子", "冲合":"六合",
               "上卦": "坎", "下卦": "兑", "易序": 60,},
    "100010": {"卦宫": "坎", "宫属": "二世", "卦名": "水雷屯",
               "纳干": ["庚", "庚", "庚", "戊", "戊", "戊"],
               "纳支": ["子", "寅", "辰", "申", "戌", "子"],
               "六亲": ["兄弟", "子孙", "官鬼", "父母", "官鬼", "兄弟"],
               "世应": ["", "世", "", "", "应", ""],
               "伏干": ["", "", "戊", "", "", ""],
               "伏支": ["", "", "午", "", "", ""],
               "伏亲": ["", "", "妻财", "", "", ""],
               "世身":"三爻", "月身":"未", "冲合":"",
               "上卦": "坎", "下卦": "震", "易序": 3,},
    "101010": {"卦宫": "坎", "宫属": "三世", "卦名": "水火既济",
               "纳干": ["己", "己", "己", "戊", "戊", "戊"],
               "纳支": ["卯", "丑", "亥", "申", "戌", "子"],
               "六亲": ["子孙", "官鬼", "兄弟", "父母", "官鬼", "兄弟"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "戊", "", "", ""],
               "伏支": ["", "", "午", "", "", ""],
               "伏亲": ["", "", "妻财", "", "", ""],
               "世身":"上爻", "月身":"寅", "冲合":"",
               "上卦": "坎", "下卦": "离", "易序": 63,},
    "101110": {"卦宫": "坎", "宫属": "四世", "卦名": "泽火革",
               "纳干": ["己", "己", "己", "丁", "丁", "丁"],
               "纳支": ["卯", "丑", "亥", "亥", "酉", "未"],
               "六亲": ["子孙", "官鬼", "兄弟", "兄弟", "父母", "官鬼"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "", "戊", "", "", ""],
               "伏支": ["", "", "午", "", "", ""],
               "伏亲": ["", "", "妻财", "", "", ""],
               "世身":"上爻", "月身":"卯", "冲合":"",
               "上卦": "兑", "下卦": "离", "易序": 49,},
    "101100": {"卦宫": "坎", "宫属": "五世", "卦名": "雷火丰",
               "纳干": ["己", "己", "己", "庚", "庚", "庚"],
               "纳支": ["卯", "丑", "亥", "午", "申", "戌"],
               "六亲": ["子孙", "官鬼", "兄弟", "妻财", "父母", "官鬼"],
               "世应": ["", "应", "", "", "世", ""],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"三爻", "月身":"戌", "冲合":"",
               "上卦": "震", "下卦": "离", "易序": 55,},
    "101000": {"卦宫": "坎", "宫属": "游魂", "卦名": "地火明夷",
               "纳干": ["己", "己", "己", "癸", "癸", "癸"],
               "纳支": ["卯", "丑", "亥", "丑", "亥", "酉"],
               "六亲": ["子孙", "官鬼", "兄弟", "官鬼", "兄弟", "父母"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "", "戊", "", "", ""],
               "伏支": ["", "", "午", "", "", ""],
               "伏亲": ["", "", "妻财", "", "", ""],
               "世身":"二爻", "月身":"酉", "冲合":"",
               "上卦": "坤", "下卦": "离", "易序": 36,},
    "010000": {"卦宫": "坎", "宫属": "归魂", "卦名": "地水师",
               "纳干": ["戊", "戊", "戊", "癸", "癸", "癸"],
               "纳支": ["寅", "辰", "午", "丑", "亥", "酉"],
               "六亲": ["子孙", "官鬼", "妻财", "官鬼", "兄弟", "父母"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"初爻", "月身":"申", "冲合":"",
               "上卦": "坤", "下卦": "坎", "易序": 7,},

    # 艮宫八卦（完整）
    "001001": {"卦宫": "艮", "宫属": "本宫", "卦名": "艮为山",
               "纳干": ["丙", "丙", "丙", "丙", "丙", "丙"],
               "纳支": ["辰", "午", "申", "戌", "子", "寅"],
               "六亲": ["兄弟", "父母", "子孙", "兄弟", "妻财", "官鬼"],
               "世应": ["", "", "应", "", "", "世"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"三爻", "月身":"巳", "冲合":"六冲",
               "上卦": "艮", "下卦": "艮", "易序": 52,},
    "101001": {"卦宫": "艮", "宫属": "一世", "卦名": "山火贲",
               "纳干": ["己", "己", "己", "丙", "丙", "丙"],
               "纳支": ["卯", "丑", "亥", "戌", "子", "寅"],
               "六亲": ["官鬼", "兄弟", "妻财", "兄弟", "妻财", "官鬼"],
               "世应": ["世", "", "", "应", "", ""],
               "伏干": ["", "丙", "丙", "", "", ""],
               "伏支": ["", "午", "申", "", "", ""],
               "伏亲": ["", "父母", "子孙", "", "", ""],
               "世身":"四爻", "月身":"子", "冲合":"六合",
               "上卦": "艮", "下卦": "离", "易序": 22,},
    "111001": {"卦宫": "艮", "宫属": "二世", "卦名": "山天大畜",
               "纳干": ["甲", "甲", "甲", "丙", "丙", "丙"],
               "纳支": ["子", "寅", "辰", "戌", "子", "寅"],
               "六亲": ["妻财", "官鬼", "兄弟", "兄弟", "妻财", "官鬼"],
               "世应": ["", "世", "", "", "应", ""],
               "伏干": ["", "丙", "丙", "", "", ""],
               "伏支": ["", "午", "申", "", "", ""],
               "伏亲": ["", "父母", "子孙", "", "", ""],
               "世身":"三爻", "月身":"丑", "冲合":"",
               "上卦": "艮", "下卦": "乾", "易序": 26,},
    "110001": {"卦宫": "艮", "宫属": "三世", "卦名": "山泽损",
               "纳干": ["丁", "丁", "丁", "丙", "丙", "丙"],
               "纳支": ["巳", "卯", "丑", "戌", "子", "寅"],
               "六亲": ["父母", "官鬼", "兄弟", "兄弟", "妻财", "官鬼"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "丙", "", "", ""],
               "伏支": ["", "", "申", "", "", ""],
               "伏亲": ["", "", "子孙", "", "", ""],
               "世身":"二爻", "月身":"申", "冲合":"",
               "上卦": "艮", "下卦": "兑", "易序": 41,},
    "110101": {"卦宫": "艮", "宫属": "四世", "卦名": "火泽睽",
               "纳干": ["丁", "丁", "丁", "己", "己", "己"],
               "纳支": ["巳", "卯", "丑", "酉", "未", "巳"],
               "六亲": ["父母", "官鬼", "兄弟", "子水", "兄弟", "父母"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "", "", "", "丙", ""],
               "伏支": ["", "", "", "", "子", ""],
               "伏亲": ["", "", "", "", "妻财", ""],
               "世身":"四爻", "月身":"卯", "冲合":"",
               "上卦": "离", "下卦": "兑", "易序": 38,},
    "110111": {"卦宫": "艮", "宫属": "五世", "卦名": "天泽履",
               "纳干": ["丁", "丁", "丁", "壬", "壬", "壬"],
               "纳支": ["巳", "卯", "丑", "午", "申", "戌"],
               "六亲": ["父母", "官鬼", "兄弟", "父母", "子孙", "兄弟"],
               "世应": ["", "应", "", "", "世", ""],
               "伏干": ["", "", "", "", "丙", ""],
               "伏支": ["", "", "", "", "子", ""],
               "伏亲": ["", "", "", "", "妻财", ""],
               "世身":"三爻", "月身":"辰", "冲合":"",
               "上卦": "乾", "下卦": "兑", "易序": 10,},
    "110011": {"卦宫": "艮", "宫属": "游魂", "卦名": "风泽中孚",
               "纳干": ["丁", "丁", "丁", "辛", "辛", "辛"],
               "纳支": ["巳", "卯", "丑", "未", "巳", "卯"],
               "六亲": ["父母", "官鬼", "兄弟", "兄弟", "父母", "官鬼"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "丙", "", "", "丙", ""],
               "伏支": ["", "申", "", "", "子", ""],
               "伏亲": ["", "子孙", "", "", "妻财", ""],
               "世身":"二爻", "月身":"酉", "冲合":"",
               "上卦": "巽", "下卦": "兑", "易序": 61,},
    "001011": {"卦宫": "艮", "宫属": "归魂", "卦名": "风山渐",
               "纳干": ["丙", "丙", "丙", "辛", "辛", "辛"],
               "纳支": ["辰", "午", "申", "未", "巳", "卯"],
               "六亲": ["兄弟", "父母", "子孙", "兄弟", "父母", "官鬼"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "", "", "丙", ""],
               "伏支": ["", "", "", "", "子", ""],
               "伏亲": ["", "", "", "", "妻财", ""],
               "世身":"三爻", "月身":"寅", "冲合":"",
               "上卦": "巽", "下卦": "艮", "易序": 53,},

    # 坤宫八卦（完整）
    "000000": {"卦宫": "坤", "宫属": "本宫", "卦名": "坤为地",
               "纳干": ["乙", "乙", "乙", "癸", "癸", "癸"],
               "纳支": ["未", "巳", "卯", "丑", "亥", "酉"],
               "六亲": ["兄弟", "父母", "官鬼", "兄弟", "妻财", "子孙"],
               "世应": ["", "", "应", "", "", "世"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"四爻", "月身":"亥", "冲合":"六冲",
               "上卦": "坤", "下卦": "坤", "易序": 2,},
    "100000": {"卦宫": "坤", "宫属": "一世", "卦名": "地雷复",
               "纳干": ["庚", "庚", "庚", "癸", "癸", "癸"],
               "纳支": ["子", "寅", "辰", "丑", "亥", "酉"],
               "六亲": ["妻财", "官鬼", "兄弟", "兄弟", "妻财", "子孙"],
               "世应": ["世", "", "", "应", "", ""],
               "伏干": ["", "乙", "", "", "", ""],
               "伏支": ["", "巳", "", "", "", ""],
               "伏亲": ["", "父母", "", "", "", ""],
               "世身":"初爻", "月身":"子", "冲合":"六合",
               "上卦": "坤", "下卦": "震", "易序": 24,},
    "110000": {"卦宫": "坤", "宫属": "二世", "卦名": "地泽临",
               "纳干": ["丁", "丁", "丁", "癸", "癸", "癸"],
               "纳支": ["巳", "卯", "丑", "丑", "亥", "酉"],
               "六亲": ["父母", "官鬼", "兄弟", "兄弟", "妻财", "子孙"],
               "世应": ["", "世", "", "", "应", ""],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"四爻", "月身":"丑", "冲合":"",
               "上卦": "坤", "下卦": "兑", "易序": 19,},
    "111000": {"卦宫": "坤", "宫属": "三世", "卦名": "地天泰",
               "纳干": ["甲", "甲", "甲", "癸", "癸", "癸"],
               "纳支": ["子", "寅", "辰", "丑", "亥", "酉"],
               "六亲": ["妻财", "官鬼", "兄弟", "兄弟", "妻财", "子孙"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "乙", "", "", "", ""],
               "伏支": ["", "巳", "", "", "", ""],
               "伏亲": ["", "父母", "", "", "", ""],
               "世身":"五爻", "月身":"寅", "冲合":"六合",
               "上卦": "坤", "下卦": "乾", "易序": 11,},
    "111100": {"卦宫": "坤", "宫属": "四世", "卦名": "雷天大壮",
               "纳干": ["甲", "甲", "甲", "庚", "庚", "庚"],
               "纳支": ["子", "寅", "辰", "午", "申", "戌"],
               "六亲": ["妻财", "官鬼", "兄弟", "父母", "子孙", "兄弟"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"初爻", "月身":"卯", "冲合":"六冲",
               "上卦": "震", "下卦": "乾", "易序": 34,},
    "111110": {"卦宫": "坤", "宫属": "五世", "卦名": "泽天夬",
               "纳干": ["甲", "甲", "甲", "丁", "丁", "丁"],
               "纳支": ["子", "寅", "辰", "亥", "酉", "未"],
               "六亲": ["妻财", "官鬼", "兄弟", "妻财", "子孙", "兄弟"],
               "世应": ["", "应", "", "", "世", ""],
               "伏干": ["", "乙", "", "", "", ""],
               "伏支": ["", "巳", "", "", "", ""],
               "伏亲": ["", "父母", "", "", "", ""],
               "世身":"四爻", "月身":"辰", "冲合":"",
               "上卦": "兑", "下卦": "乾", "易序": 43,},
    "111010": {"卦宫": "坤", "宫属": "游魂", "卦名": "水天需",
               "纳干": ["甲", "甲", "甲", "戊", "戊", "戊"],
               "纳支": ["子", "寅", "辰", "申", "戌", "子"],
               "六亲": ["妻财", "官鬼", "兄弟", "子孙", "兄弟", "妻财"],
               "世应": ["应", "", "", "世", "", ""],
               "伏干": ["", "乙", "", "", "", ""],
               "伏支": ["", "巳", "", "", "", ""],
               "伏亲": ["", "父母", "", "", "", ""],
               "世身":"三爻", "月身":"酉", "冲合":"",
               "上卦": "坎", "下卦": "乾", "易序": 5,},
    "000010": {"卦宫": "坤", "宫属": "归魂", "卦名": "水地比",
               "纳干": ["乙", "乙", "乙", "戊", "戊", "戊"],
               "纳支": ["未", "巳", "卯", "申", "戌", "子"],
               "六亲": ["兄弟", "父母", "官鬼", "子孙", "兄弟", "妻财"],
               "世应": ["", "", "世", "", "", "应"],
               "伏干": ["", "", "", "", "", ""],
               "伏支": ["", "", "", "", "", ""],
               "伏亲": ["", "", "", "", "", ""],
               "世身":"四爻", "月身":"申", "冲合":"",
               "上卦": "坎", "下卦": "坤", "易序": 8,}
}

# 八卦宫位归属及六亲地支映射
GUA_PALACES = {
    "乾": {
        "子": "子孙", "丑": "父母", "寅": "妻财", "卯": "妻财", "辰": "父母", "巳": "官鬼", "午": "官鬼", "未": "父母", "申": "兄弟", "酉": "兄弟", "戌": "父母", "亥": "子孙"
    },
    "兑": {
        "子": "子孙", "丑": "父母", "寅": "妻财", "卯": "妻财", "辰": "父母", "巳": "官鬼", "午": "官鬼", "未": "父母", "申": "兄弟", "酉": "兄弟", "戌": "父母", "亥": "子孙"
    },
    "离": {
        "子": "官鬼", "丑": "子孙", "寅": "父母", "卯": "父母", "辰": "子孙", "巳": "兄弟", "午": "兄弟", "未": "子孙", "申": "妻财", "酉": "妻财", "戌": "子孙", "亥": "官鬼"
    },
    "震": {
        "子": "父母", "丑": "妻财", "寅": "兄弟", "卯": "兄弟", "辰": "妻财", "巳": "子孙", "午": "子孙", "未": "妻财", "申": "官鬼", "酉": "官鬼", "戌": "妻财", "亥": "父母"
    },
    "巽": {
        "子": "父母", "丑": "妻财", "寅": "兄弟", "卯": "兄弟", "辰": "妻财", "巳": "子孙", "午": "子孙", "未": "妻财", "申": "官鬼", "酉": "官鬼", "戌": "妻财", "亥": "父母"
    },
    "坎": {
        "子": "兄弟", "丑": "官鬼", "寅": "子孙", "卯": "子孙", "辰": "官鬼", "巳": "妻财", "午": "妻财", "未": "官鬼", "申": "父母", "酉": "父母", "戌": "官鬼", "亥": "兄弟"
    },
    "艮": {
        "子": "妻财", "丑": "兄弟", "寅": "官鬼", "卯": "官鬼", "辰": "兄弟", "巳": "父母", "午": "父母", "未": "兄弟", "申": "子孙", "酉": "子孙", "戌": "兄弟", "亥": "妻财"
    },
    "坤": {
        "子": "妻财", "丑": "兄弟", "寅": "官鬼", "卯": "官鬼", "辰": "兄弟", "巳": "父母", "午": "父母", "未": "兄弟", "申": "子孙", "酉": "子孙", "戌": "兄弟", "亥": "妻财"
    }
}

TIAN_GAN_TO_LIU_SHEN = {
    "甲": ["青龙", "朱雀", "勾陈", "螣蛇", "白虎", "玄武"],
    "乙": ["青龙", "朱雀", "勾陈", "螣蛇", "白虎", "玄武"],
    "丙": ["朱雀", "勾陈", "螣蛇", "白虎", "玄武", "青龙"],
    "丁": ["朱雀", "勾陈", "螣蛇", "白虎", "玄武", "青龙"],
    "戊": ["勾陈", "螣蛇", "白虎", "玄武", "青龙", "朱雀"],
    "己": ["螣蛇", "白虎", "玄武", "青龙", "朱雀", "勾陈"],
    "庚": ["白虎", "玄武", "青龙", "朱雀", "勾陈", "螣蛇"],
    "辛": ["白虎", "玄武", "青龙", "朱雀", "勾陈", "螣蛇"],
    "壬": ["玄武", "青龙", "朱雀", "勾陈", "螣蛇", "白虎"],
    "癸": ["玄武", "青龙", "朱雀", "勾陈", "螣蛇", "白虎"]
}

# ======================= 模拟前端起卦 =======================

# 求6个3位随机数，为六个爻值
def yao_result():
    result = []
    for _ in range(6):
        part = ''
        for i in range(3):
            part += str(random.randint(0, 9))
        result.append(part)
    return result

# 生成6个3位随机数并打印
yao_list = yao_result()
# yao_list = ["010", "000", "010", "111", "101", "101"]  # 有动爻的测试数据
# yao_list = ["111", "111", "111", "111", "111", "111"]  # 有6个动爻的测试数据
# yao_list = ["101", "101", "101", "101", "101", "101"]  # 无动爻的测试数据（所有爻值都是奇数个数为2，不是0或3）
print("1. 起卦数==========")
print("六个爻值:", yao_list)
print()


# ======================= 调用函数 =======================

# 本卦纳甲
def ben_gua_najia(yao_list):   
    odd_counts_list = [sum(1 for d in yao if int(d) % 2 == 1) for yao in yao_list] # 统计每个3位数中奇数的个数
    ben_gua_list = [1 if v % 2 else 0 for v in odd_counts_list] # 将奇数转为1，偶数转为0，并合成列表       
    ben_gua_str = ''.join(map(str, ben_gua_list)) # 将列表转换为字符串       
    ben_gua_info_dict = SIXTY_FOUR_GUA.get(ben_gua_str, {})
    ben_gua_info_dict['数列'] = ben_gua_list
        
    return odd_counts_list, ben_gua_info_dict

print("2. 本卦纳甲==========")
# 统计每个3位数中奇数的个数并打印
odd_counts_list, ben_gua_info_dict = ben_gua_najia(yao_list)

print("本卦每爻奇数个数:", odd_counts_list)
print("本卦对码列表:", ben_gua_info_dict.get('数列', '未知对码列表'))
# print("本卦对码字符串:", ben_gua_str)
print("本卦纳甲字典:", ben_gua_info_dict)
print("本卦宫属:", ben_gua_info_dict.get('卦宫', '未知卦宫')) # 从对码卦象中提取宫属，若不存在则返回'未知卦宫'
print("本卦宫型:", ben_gua_info_dict.get('宫属', '未知宫属')) # 从对码卦象中提取宫型，若不存在则返回'未知宫属'
print("本卦卦名:", ben_gua_info_dict.get('卦名', '未知卦名')) # 从对码卦象中提取卦象名称，若不存在则返回'未知卦名'
print("本卦纳干:", ben_gua_info_dict.get('纳干', '未知纳干')) # 从对码卦象中提取天干，若不存在则返回'未知纳干'
print("本卦纳支:", ben_gua_info_dict.get('纳支', '未知纳支')) # 从对码卦象中提取地支，若不存在则返回'未知纳支'
print("本卦纳亲:", ben_gua_info_dict.get('六亲', '未知六亲')) # 从对码卦象中提取六亲，若不存在则返回'未知六亲'
print("本卦世应:", ben_gua_info_dict.get('世应', '未知世应')) # 从对码卦象中提取世应，若不存在则返回'未知世应'
print("本卦世位:", ben_gua_info_dict.get('世应', '未知世位').index('世') + 1) # 从对码卦象中提取世爻位，若不存在则返回'未知世位'
print("本卦应位:", ben_gua_info_dict.get('世应', '未知应位').index('应') + 1) # 从对码卦象中提取应爻位，若不存在则返回'未知应位'
print("本卦伏干:", ben_gua_info_dict.get('伏干', '未知伏干')) # 从对码卦象中提取伏干，若不存在则返回'未知伏干'
print("本卦伏支:", ben_gua_info_dict.get('伏支', '未知伏支')) # 从对码卦象中提取伏支，若不存在则返回'未知伏支'
print("本卦伏亲:", ben_gua_info_dict.get('伏亲', '未知伏亲')) # 从对码卦象中提取伏亲，若不存在则返回'未知伏亲'
print("本卦世身:", ben_gua_info_dict.get('世身', '未知世身')) # 从对码卦象中提取世身，若不存在则返回'未知世身'
print("本卦月身:", ben_gua_info_dict.get('月身', '未知月身')) # 从对码卦象中提取月身，若不存在则返回'未知月身'
print("本卦冲合:", ben_gua_info_dict.get('冲合', '未知冲合')) # 从对码卦象中提取冲合，若不存在则返回'未知冲合'
print()


def dong_yao(odd_counts_list):   
    dong_yao_wei_list = [i + 1 for i, v in enumerate(odd_counts_list) if v in (0, 3)] # 找出值为0或3的索引（索引+1为动爻位）
        
    # 根据奇数个数生成动爻符号列表
    dong_yao_list = []
    for v in odd_counts_list:
        if v == 0:
            dong_yao_list.append('×→')
        elif v == 3:
            dong_yao_list.append('○→')
        else:
            dong_yao_list.append('')
    
    return dong_yao_wei_list, dong_yao_list

# 找出动爻位并打印
dong_yao_wei_list, dong_list = dong_yao(odd_counts_list)
print('3. 动爻　==========')
print("动爻位:", dong_yao_wei_list)
print("动爻符号:", dong_list)
print()

def bian_gua_najia(odd_counts_list):   
    bian_gua_list = [1 if v == 0 else 0 if v in (2, 3) else 1 for v in odd_counts_list] # 将列表中的0转为1，1不变，2转为0，3转为0，形成新的列表
    bian_gua_str = ''.join(map(str, bian_gua_list)) # 将列表转换为字符串
    bian_gua_info_dict = SIXTY_FOUR_GUA.get(bian_gua_str, {})  # 以bian_gua_str值去SIXTY_FOUR_GUA字典中值对码，返回对应值    
    bian_gua_process_dizhi_list = bian_gua_info_dict.get('纳支', '未知纳支') # 从对码卦象中提取地支，若不存在则返回'未知纳支'
    ben_gua_gong = ben_gua_info_dict.get('卦宫', '未知卦宫') # 从本卦纳甲字典中提取卦宫，若不存在则返回'未知卦宫'
    bian_gua_liuqin_list = list(map(lambda x: GUA_PALACES.get(ben_gua_info_dict.get('卦宫', '未知宫属'), {}).get(x, '未知六亲'), bian_gua_process_dizhi_list)) # 根据本卦卦宫重新映射变卦六亲，若不存在则返回'未知六亲'
    bian_gua_info_dict['六亲'] = bian_gua_liuqin_list # 新增变卦六亲键值对
    bian_gua_info_dict['数列'] = bian_gua_list

    return bian_gua_info_dict

# 判断是否有动爻，有动爻才进行变卦计算
if len(dong_yao_wei_list) > 0:
    # 打印转换后的列表
    bian_gua_info_dict = bian_gua_najia(odd_counts_list)      
    print("4. 变卦纳甲==========")
    print("变卦列表:", bian_gua_info_dict.get('数列', '未知变卦列表'))
    # print("变卦字符串:", bian_gua_str) 
    print("变卦纳甲字典:", bian_gua_info_dict)
    print("变卦卦宫:", bian_gua_info_dict.get('卦宫', '未知卦宫'))
    print("变卦宫属:", bian_gua_info_dict.get('宫属', '未知宫属'))
    print("变卦卦名:", bian_gua_info_dict.get('卦名', '未知卦名')) 
    print("变卦纳干:", bian_gua_info_dict.get('纳干', '未知纳干'))
    print("变卦六亲:", bian_gua_info_dict.get('六亲', '未知六亲'))
    print("变卦冲合:", bian_gua_info_dict.get('冲合', '未知纳支'))
else:
    print("4. 变卦纳甲==========")
    print("无动爻，不变卦")
    bian_gua_info_dict = {}
print()

# 获取日干值
print("5. 日干==========")
# 由于路径问题，暂时使用固定日干进行测试
# 在实际应用中，应该从calendar_calculator获取真实日干
ri_gan = "甲"  # 使用甲日作为测试
print("日干:", ri_gan)

# 根据日干计算六神
print("6. 六神计算==========")
if ri_gan in TIAN_GAN_TO_LIU_SHEN:
    liu_shen_list = TIAN_GAN_TO_LIU_SHEN[ri_gan]
    print("六神排列:", liu_shen_list)
    
    # 将六神应用到本卦各爻（从初爻到上爻）
    print("本卦六神分布:")
    ben_gua_liu_shen = []
    for i, yao_wei in enumerate(range(1, 7)):  # 从一爻到六爻
        liu_shen = liu_shen_list[i]
        ben_gua_liu_shen.append(liu_shen)
        yao_name = "初爻" if yao_wei == 1 else ("上爻" if yao_wei == 6 else f"第{yao_wei}爻")
        print(f"  {yao_name}: {liu_shen}")
    
    # 显示完整的本卦信息（包含六神）
    print("\n7. 完整本卦信息==========")
    print("爻位:  初爻   二爻   三爻   四爻   五爻   上爻")
    print("阴阳: ", " ".join(["阳" if x == 1 else "阴" for x in ben_gua_info_dict['数列']]))
    print("六亲: ", " ".join(ben_gua_info_dict.get('六亲', ['未知']*6)))
    print("六神: ", " ".join(ben_gua_liu_shen))
    print("世应: ", " ".join(ben_gua_info_dict.get('世应', ['']*6)))
    
    # 显示动爻信息
    print("\n8. 动爻分析==========")
    print("动爻位:", dong_yao_wei_list)
    print("动爻符号:", dong_list)
    for yao_wei in dong_yao_wei_list:
        yao_index = yao_wei - 1  # 转换为列表索引（一爻=索引0，六爻=索引5）
        yao_name = "初爻" if yao_wei == 1 else ("上爻" if yao_wei == 6 else f"第{yao_wei}爻")
        print(f"  {yao_name}动: {ben_gua_liu_shen[yao_index]}神发动")
        
else:
    print("日干不在六神映射表中")
        
